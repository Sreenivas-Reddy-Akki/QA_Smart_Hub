<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QA Smart Hub | {% block title %}{% endblock %}</title>

    <!-- Favicon Links -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">

    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='images/favicon-16x16.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='images/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="64x64" href="{{ url_for('static', filename='images/favicon-64x64.png') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='images/site.webmanifest') }}">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#4f46e5', // Indigo-600
                        'secondary': '#1f2937', // Gray-800
                        'background': '#111827', // Gray-900
                        'text-light': '#f3f4f6', // Gray-100
                        'text-muted': '#9ca3af', // Gray-400
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <style>
        /* Ensures the whole viewport is used for flexible layout */
        body { min-height: 100vh; }

        /* DEFAULT THEME (DARK) Scrollbar - uses body/html default styles */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }

        /* LIGHT THEME OVERRIDES for scrollbar */
        .light-theme::-webkit-scrollbar-track { background: #e5e7eb; }
        .light-theme::-webkit-scrollbar-thumb { background: #9ca3af; }

        /* FIX: Defensive CSS to ensure fixed header is always on top of the scrollbar */
        .fixed-header-z-fix {
            z-index: 9999 !important; /* Force a very high Z-index */
            background-color: #1f2937 !important; /* Ensure background is fully opaque (Dark Theme) */
        }

        /* LIGHT THEME OVERRIDES (applied when body has 'light-theme' class) */
        .light-theme { background-color: #f3f4f6 !important; color: #111827 !important; }
        .light-theme .bg-background { background-color: #f3f4f6 !important; }
        .light-theme .bg-secondary { background-color: #ffffff !important; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .light-theme .fixed-header-z-fix { background-color: #ffffff !important; }

        .light-theme .text-text-light { color: #111827 !important; }
        .light-theme .text-text-muted { color: #4b5563 !important; }
        .light-theme .hover\:bg-gray-700:hover { background-color: #e5e7eb !important; }
        .light-theme .hover\:text-text-light:hover { color: #111827 !important; }
        .light-theme .border-gray-700 { border-color: #d1d5db !important; }
        .light-theme .bg-gray-800 { background-color: #e5e7eb !important; }

        .card-hover-effect {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            border-radius: 0.5rem;
        }
        .card-hover-effect:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.3), 0 4px 6px -2px rgba(0,0,0,0.15);
        }
        .light-theme .card-hover-effect:hover { box-shadow: 0 5px 10px rgba(0,0,0,0.1); }

        /* Small helper to ensure content starts below header; header script adjusts actual height */
        .header-spacer { height: 4rem; }
    </style>

    <script>
        const THEME_KEY = 'qa_theme';
        // Immediately apply theme state on load from localStorage
        const savedTheme = localStorage.getItem(THEME_KEY);
        if (savedTheme === 'light') {
            document.documentElement.classList.remove('bg-gray-900');
            document.documentElement.classList.add('bg-gray-100');
            document.body.classList.add('light-theme');
        } else {
            // Default/Dark Theme
            document.documentElement.classList.add('bg-gray-900');
        }
    </script>
</head>


<body class="flex flex-col min-h-screen font-sans bg-background text-text-light">

    <!-- include header (contains the full nav + footer) -->
    {% include 'includes/header.html' %}

    <!-- spacer ensures content starts below header; header script will update its exact height -->
    <div id="header-spacer" class="header-spacer"></div>

    <main class="flex-grow">
        <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
            {% block content %}{% endblock %}
        </div>
    </main>

</body>
</html>
